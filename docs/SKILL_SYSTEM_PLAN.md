# è®¾è®¡é™¢ Skills ç³»ç»Ÿå®æ–½è®¡åˆ’

> å°†è®¾è®¡é™¢ä»"ç¡¬ç¼–ç éœ€æ±‚åˆ†æå·¥å…·"å‡çº§ä¸º"æ•°æ®é©±åŠ¨çš„å¤šæŠ€èƒ½ AI å¼€å‘æµæ°´çº¿"

> **å®æ–½çŠ¶æ€**: Phase 1-3 å·²å®Œæˆ (2026-02-17)ã€‚Phase 4ï¼ˆè§£è€¦å‡†å¤‡ï¼‰å¾…åç»­ã€‚
> 3 ä¸ªå†…ç½®æŠ€èƒ½ï¼šéœ€æ±‚åˆ†æã€Bug é—®è¯Šã€å®ç°å®¡æŸ¥ã€‚

## ä¸€ã€èƒŒæ™¯ä¸ç›®æ ‡

### ç°çŠ¶é—®é¢˜
è®¾è®¡é™¢ç›®å‰æ‰€æœ‰ AI è¡Œä¸ºï¼ˆè§’è‰²å®šä¹‰ã€å¯¹è¯ç­–ç•¥ã€æé—®é£æ ¼ã€é˜¶æ®µæµç¨‹ã€äº§å‡ºæ–‡æ¡£æ ¼å¼ï¼‰å…¨éƒ¨ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ï¼Œåªèƒ½åš"éœ€æ±‚åˆ†æ"ä¸€ä»¶äº‹ã€‚æ–°å¢ä»»ä½•å·¥ä½œæµï¼ˆå¦‚ Bug é—®è¯Šã€ä»£ç å®¡æŸ¥ï¼‰éƒ½éœ€è¦åˆ†å‰ä»£ç ã€‚

### ç›®æ ‡
å¼•å…¥ **Skillï¼ˆæŠ€èƒ½ï¼‰** æŠ½è±¡å±‚ï¼Œå°† AI å·¥ä½œæµé…ç½®ä»ä»£ç ä¸­æå–ä¸ºæ•°æ®åº“é©±åŠ¨çš„å¯ç®¡ç†å®ä½“ã€‚å®ç°ï¼š
1. ä¸€ä¸ª Skill ç®¡ç†ç•Œé¢ï¼ˆCRUDï¼‰
2. é¡¹ç›®åˆ›å»ºæ—¶é€‰æ‹© Skill
3. è¿è¡Œæ—¶æ ¹æ® Skill é…ç½®æ³¨å…¥ prompt / æ¸²æŸ“é˜¶æ®µ / æ˜¾ç¤ºæ–‡æ¡ˆ
4. å†…ç½® "éœ€æ±‚åˆ†æ" å’Œ "Bug é—®è¯Š" ä¸¤ä¸ª Skill éªŒè¯æ¡†æ¶

### è®¾è®¡åŸåˆ™
- **æ•°æ®é©±åŠ¨**ï¼šSkill é…ç½®å­˜å‚¨åœ¨ DB ä¸­ï¼Œéç¡¬ç¼–ç 
- **å¤ç”¨ä¼˜å…ˆ**ï¼šChatPanelã€å·¥å…·ç³»ç»Ÿã€ä¸Šä¸‹æ–‡ç®¡ç†ç­‰åŸºç¡€è®¾æ–½ä¸å˜
- **æ¸è¿›å¼**ï¼šåˆ†é˜¶æ®µå®æ–½ï¼Œæ¯é˜¶æ®µå¯ç‹¬ç«‹äº¤ä»˜
- **è§£è€¦å‡†å¤‡**ï¼šSkill ç³»ç»Ÿä¸ä¾èµ– GoldenNest ç‰¹æœ‰é€»è¾‘

---

## äºŒã€Skill æ•°æ®æ¨¡å‹

### 2.1 æ•°æ®åº“è¡¨è®¾è®¡

æ–°å¢ `skills` è¡¨ï¼š

```python
# studio/backend/models.py

class Skill(Base):
    """AI æŠ€èƒ½å®šä¹‰ â€” æ•°æ®é©±åŠ¨çš„å·¥ä½œæµé…ç½®"""
    __tablename__ = "skills"

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String(100), nullable=False, unique=True)  # "éœ€æ±‚åˆ†æ", "Bug é—®è¯Š"
    icon = Column(String(10), default="ğŸ¯")                   # èœå•å›¾æ ‡
    description = Column(Text, default="")                     # ç®€çŸ­æè¿°
    is_builtin = Column(Boolean, default=False)                # å†…ç½®æŠ€èƒ½ä¸å¯åˆ é™¤
    is_enabled = Column(Boolean, default=True)                 # å¯ç”¨/ç¦ç”¨

    # ---- AI å¯¹è¯é…ç½® ----
    role_prompt = Column(Text, nullable=False)                 # è§’è‰²å®šä¹‰ (è°åœ¨è¯´è¯)
    strategy_prompt = Column(Text, nullable=False)             # å¯¹è¯ç­–ç•¥ (å¦‚ä½•å¯¹è¯)
    tool_strategy_prompt = Column(Text, default="")            # å·¥å…·ä½¿ç”¨ç­–ç•¥
    finalization_prompt = Column(Text, default="")             # å®šç¨¿æç¤º (ä½•æ—¶/å¦‚ä½•å®šç¨¿)
    output_generation_prompt = Column(Text, default="")        # äº§å‡ºç‰©ç”Ÿæˆ prompt æ¨¡æ¿
                                                               # æ¨¡æ¿å˜é‡: {discussion_summary}

    # ---- é˜¶æ®µæµç¨‹é…ç½® ----
    stages = Column(JSON, nullable=False)
    # æ ¼å¼: [
    #   {"key": "draft", "label": "è‰ç¨¿", "status": "draft"},
    #   {"key": "discussing", "label": "è®¨è®º", "status": "discussing"},
    #   {"key": "planned", "label": "å®šç¨¿", "status": "planned"},
    #   ...
    # ]

    # ---- UI æ–‡æ¡ˆé…ç½® ----
    ui_labels = Column(JSON, default=lambda: {})
    # æ ¼å¼: {
    #   "project_noun": "éœ€æ±‚",           # é¡¹ç›®ç§°å‘¼
    #   "create_title": "ğŸ†• æ–°å»ºéœ€æ±‚",   # åˆ›å»ºå¯¹è¯æ¡†æ ‡é¢˜
    #   "create_placeholder": "ç®€æ˜æè¿°éœ€æ±‚ç›®æ ‡",
    #   "description_placeholder": "è¯¦ç»†æè¿°éœ€æ±‚èƒŒæ™¯å’ŒæœŸæœ›æ•ˆæœ...",
    #   "output_noun": "éœ€æ±‚è§„æ ¼ä¹¦",      # äº§å‡ºæ–‡æ¡£åç§°
    #   "output_tab_label": "ğŸ“‹ è®¾è®¡ç¨¿", # äº§å‡ºæ–‡æ¡£ tab æ ‡ç­¾
    #   "finalize_action": "æ•²å®šæ–¹æ¡ˆ",    # å®šç¨¿åŠ¨ä½œåç§°
    # }

    # ---- å…ƒä¿¡æ¯ ----
    sort_order = Column(Integer, default=0)                    # æ’åº
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
```

### 2.2 Project è¡¨å…³è”

```python
# Project è¡¨æ–°å¢å­—æ®µ
skill_id = Column(Integer, ForeignKey("skills.id"), nullable=True)  # nullable å…¼å®¹æ—§æ•°æ®
skill = relationship("Skill")
```

### 2.3 è‡ªåŠ¨è¿ç§»

åœ¨ `main.py::_auto_migrate()` ä¸­æ·»åŠ ï¼š

```python
# skills è¡¨é€šè¿‡ init_db() è‡ªåŠ¨åˆ›å»º

# projects è¡¨è¿ç§»
"skill_id": "ALTER TABLE projects ADD COLUMN skill_id INTEGER REFERENCES skills(id)"
```

---

## ä¸‰ã€å†…ç½® Skill ç§å­æ•°æ®

### 3.1 éœ€æ±‚åˆ†æï¼ˆä»ç°æœ‰ç¡¬ç¼–ç æå–ï¼‰

```python
BUILTIN_SKILL_REQUIREMENT = {
    "name": "éœ€æ±‚åˆ†æ",
    "icon": "ğŸ“‹",
    "description": "ä¸ç”¨æˆ·è®¨è®ºäº§å“éœ€æ±‚ï¼Œæ¾„æ¸…è¾¹ç•Œï¼Œç”Ÿæˆéœ€æ±‚è§„æ ¼ä¹¦",
    "is_builtin": True,
    "role_prompt": """ä½ æ˜¯ä¸€ä½èµ„æ·±äº§å“ç»ç†å’Œéœ€æ±‚åˆ†æå¸ˆï¼Œæ­£åœ¨ã€Œè®¾è®¡é™¢ã€ä¸­å’Œç”¨æˆ·è®¨è®ºä¸€ä¸ªäº§å“éœ€æ±‚ã€‚""",
    "strategy_prompt": """## æ ¸å¿ƒåŸåˆ™ï¼šéœ€æ±‚æ¢è®¨ä¼˜å…ˆï¼Œå®ç°ç»†èŠ‚é å

ä½ çš„é¦–è¦ä»»åŠ¡æ˜¯å¸®åŠ©ç”¨æˆ·æŠŠéœ€æ±‚æƒ³æ¸…æ¥šã€è¯´æ˜ç™½ï¼Œè€Œä¸æ˜¯æ€¥äºç»™å‡ºæŠ€æœ¯æ–¹æ¡ˆã€‚

### å¯¹è¯ç­–ç•¥
1. **ä¸»åŠ¨æé—®** â€” ç”¨æˆ·æè¿°éœ€æ±‚åï¼Œç«‹å³ç”¨ `ask_user` å·¥å…·æå‡º 3-5 ä¸ªå…³é”®é—®é¢˜æ¥æ¾„æ¸…éœ€æ±‚ã€‚
2. **èšç„¦ã€Œåšä»€ä¹ˆã€** â€” è®¨è®ºåº”å›´ç»•ï¼šç”¨æˆ·æ•…äº‹ã€äº¤äº’æµç¨‹ã€ä¸šåŠ¡è§„åˆ™ã€è¾¹ç•Œæ¡ä»¶ã€ä¼˜å…ˆçº§ã€‚
3. **è¿ç»­æé—®** â€” å¦‚æœä¸€è½®å›ç­”åä»æœ‰ä¸æ˜ç¡®çš„åœ°æ–¹ï¼Œç»§ç»­ç”¨ `ask_user` è¿½é—®ã€‚
4. **æ€»ç»“ç¡®è®¤** â€” æ¯è½®é—®ç­”åï¼Œç®€è¦æ€»ç»“ä½ å¯¹éœ€æ±‚çš„ç†è§£ï¼Œè®©ç”¨æˆ·ç¡®è®¤æˆ–çº æ­£ã€‚
5. **å¾ªå¾ªå–„è¯±** â€” å¸®åŠ©ç”¨æˆ·å‘ç°ä»–ä»¬æ²¡æƒ³åˆ°çš„éœ€æ±‚åœºæ™¯ã€‚

### ä»€ä¹ˆæ—¶å€™è®¨è®ºæŠ€æœ¯
- âœ… ç”¨æˆ·ä¸»åŠ¨é—®"è¿™ä¸ªç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°"æ—¶
- âœ… éœ€è¦æŸ¥çœ‹ä»£ç æ¥ç†è§£ç°æœ‰åŠŸèƒ½æ—¶
- âœ… æŠ€æœ¯çº¦æŸä¼šå½±å“éœ€æ±‚å¯è¡Œæ€§æ—¶
- âŒ ä¸è¦ä¸»åŠ¨å»ºè®®æ•°æ®åº“è¡¨ç»“æ„ã€API è®¾è®¡ã€ç»„ä»¶æ‹†åˆ†ç­‰
- âŒ ä¸è¦åœ¨ç”¨æˆ·åªæè¿°äº†å¤§æ¦‚æƒ³æ³•æ—¶å°±ç»™å‡ºå®Œæ•´æŠ€æœ¯æ–¹æ¡ˆ""",
    "finalization_prompt": """## å…³äºæ•²å®šæ–¹æ¡ˆ
å½“ç”¨æˆ·è¯´"æ•²å®š"æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŸºäºè®¨è®ºå†å²ç”Ÿæˆéœ€æ±‚è§„æ ¼ä¹¦ï¼ˆPlanï¼‰ã€‚
ä½ ä¸éœ€è¦åœ¨å¯¹è¯ä¸­è¾“å‡º Plan æ ¼å¼ï¼Œåªéœ€ç¡®ä¿è®¨è®ºå……åˆ†ã€éœ€æ±‚æ˜ç¡®å³å¯ã€‚
åœ¨æ•²å®šä¹‹å‰ï¼Œä½ åº”è¯¥ä¸»åŠ¨ç¡®è®¤ï¼šæ‰€æœ‰å…³é”®éœ€æ±‚æ˜¯å¦éƒ½å·²è®¨è®ºæ¸…æ¥šã€‚""",
    "output_generation_prompt": """åŸºäºä»¥ä¸‹è®¨è®ºå†…å®¹ï¼Œç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„ **éœ€æ±‚è§„æ ¼ä¹¦ï¼ˆPlanï¼‰**ã€‚

## å†™ä½œåŸåˆ™

1. **èšç„¦ã€Œåšä»€ä¹ˆã€è€Œéã€Œæ€ä¹ˆåšã€**ï¼šè¯¦ç»†æè¿°åŠŸèƒ½éœ€æ±‚ã€ä¸šåŠ¡è§„åˆ™ã€ç”¨æˆ·äº¤äº’æµç¨‹ã€è¾¹ç•Œæ¡ä»¶ã€éªŒæ”¶æ ‡å‡†ã€‚ä¸è¦ç»™å‡ºå…·ä½“çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼ˆå¦‚æ•°æ®åº“è¡¨ç»“æ„ã€API è·¯å¾„è®¾è®¡ã€ç»„ä»¶æ‹†åˆ†æ–¹å¼ï¼‰ï¼Œé™¤éç”¨æˆ·åœ¨è®¨è®ºä¸­æ˜ç¡®è¦æ±‚äº†ç‰¹å®šå®ç°æ–¹å¼ã€‚
2. **ä¿ç•™ç”¨æˆ·çš„æ˜ç¡®æŠ€æœ¯å†³ç­–**ï¼šå¦‚æœç”¨æˆ·åœ¨è®¨è®ºä¸­ä¸»åŠ¨æå‡ºäº†æŠ€æœ¯é€‰å‹ã€æ¶æ„çº¦æŸæˆ–å®ç°åå¥½ï¼Œå¿…é¡»åŸæ ·ä¿ç•™å¹¶æ ‡æ³¨ä¸ºã€Œç”¨æˆ·æŒ‡å®šã€ã€‚
3. **éœ€æ±‚è¦å¯éªŒè¯**ï¼šæ¯ä¸ªåŠŸèƒ½ç‚¹åº”æœ‰æ˜ç¡®çš„å®Œæˆæ ‡å‡†ï¼Œè®©å®ç°è€…èƒ½åˆ¤æ–­"åšåˆ°äº†æ²¡æœ‰"ã€‚
4. **æ¶ˆé™¤æ­§ä¹‰**ï¼šå¯¹è®¨è®ºä¸­æ¨¡ç³Šæˆ–æœ‰å¤šç§ç†è§£çš„åœ°æ–¹ï¼Œé€‰æ‹©æœ€åˆç†çš„è§£é‡Šå¹¶æ˜ç¡®å†™å‡ºï¼Œæˆ–æ ‡æ³¨ä¸ºã€Œå¾…ç¡®è®¤ã€ã€‚
5. **ä¸è¦æ·»åŠ è‡†æµ‹**ï¼šä¸¥æ ¼åŸºäºè®¨è®ºå†…å®¹ï¼Œä¸æ·»åŠ è®¨è®ºä¸­æœªæ¶‰åŠçš„åŠŸèƒ½æˆ–æŠ€æœ¯å‡è®¾ã€‚

## è¾“å‡ºæ ¼å¼

### é¡¹ç›®æ¦‚è¿°
ä¸€æ®µè¯æè¿°é¡¹ç›®ç›®æ ‡å’Œæ ¸å¿ƒä»·å€¼ã€‚

### åŠŸèƒ½éœ€æ±‚
æŒ‰ä¼˜å…ˆçº§åˆ†ç»„ï¼Œæ¯ä¸ªåŠŸèƒ½åŒ…å«ï¼š
- **åŠŸèƒ½åç§°**
- **ç”¨æˆ·æ•…äº‹**: ä½œä¸º [è§’è‰²]ï¼Œæˆ‘å¸Œæœ› [åšä»€ä¹ˆ]ï¼Œä»¥ä¾¿ [è¾¾åˆ°ä»€ä¹ˆç›®çš„]
- **è¯¦ç»†æè¿°**: å…·ä½“çš„äº¤äº’æµç¨‹ã€ä¸šåŠ¡è§„åˆ™
- **è¾¹ç•Œæ¡ä»¶**: å¼‚å¸¸æƒ…å†µå¦‚ä½•å¤„ç†
- **éªŒæ”¶æ ‡å‡†**: å¯æ£€éªŒçš„å®Œæˆæ¡ä»¶åˆ—è¡¨

### éåŠŸèƒ½éœ€æ±‚
æ€§èƒ½ã€å®‰å…¨ã€å…¼å®¹æ€§ç­‰çº¦æŸï¼ˆä»…åŒ…å«è®¨è®ºä¸­æåŠçš„ï¼‰ã€‚

### ç”¨æˆ·æŒ‡å®šçš„æŠ€æœ¯çº¦æŸ
ä»…åˆ—å‡ºç”¨æˆ·åœ¨è®¨è®ºä¸­**ä¸»åŠ¨è¦æ±‚**çš„æŠ€æœ¯å†³ç­–ï¼ˆå¦‚æŒ‡å®šæŸæ¡†æ¶ã€æŸç§æ•°æ®æ ¼å¼ç­‰ï¼‰ã€‚å¦‚æœæ²¡æœ‰ï¼Œå†™ã€Œæ— ç‰¹å®šæŠ€æœ¯çº¦æŸï¼Œç”±å®ç°è€…è‡ªè¡Œå†³å®šæœ€ä½³æ–¹æ¡ˆã€ã€‚

### å¾…ç¡®è®¤äº‹é¡¹
è®¨è®ºä¸­æœªå®Œå…¨æ˜ç¡®çš„é—®é¢˜ã€‚

---

è®¨è®ºå†…å®¹ï¼š
{discussion_summary}

è¯·ç›´æ¥è¾“å‡ºéœ€æ±‚è§„æ ¼ä¹¦å†…å®¹ï¼ˆä¸éœ€è¦ä»£ç å—åŒ…è£¹ï¼‰:""",
    "stages": [
        {"key": "draft", "label": "è‰ç¨¿", "status": "draft"},
        {"key": "discussing", "label": "è®¨è®º", "status": "discussing"},
        {"key": "planned", "label": "å®šç¨¿", "status": "planned"},
        {"key": "implementing", "label": "å®æ–½", "status": "implementing"},
        {"key": "reviewing", "label": "å®¡æ ¸", "status": "reviewing"},
        {"key": "deploying", "label": "éƒ¨ç½²", "status": "deploying"},
        {"key": "deployed", "label": "å®Œæˆ", "status": "deployed"},
    ],
    "ui_labels": {
        "project_noun": "éœ€æ±‚",
        "create_title": "ğŸ†• æ–°å»ºéœ€æ±‚",
        "create_placeholder": "ç®€æ˜æè¿°éœ€æ±‚ç›®æ ‡",
        "description_placeholder": "è¯¦ç»†æè¿°éœ€æ±‚èƒŒæ™¯å’ŒæœŸæœ›æ•ˆæœ...",
        "output_noun": "éœ€æ±‚è§„æ ¼ä¹¦",
        "output_tab_label": "ğŸ“‹ è®¾è®¡ç¨¿",
        "finalize_action": "æ•²å®šæ–¹æ¡ˆ",
    },
}
```

### 3.2 Bug é—®è¯Šï¼ˆæ–°å¢ï¼‰

```python
BUILTIN_SKILL_BUG_TRIAGE = {
    "name": "Bug é—®è¯Š",
    "icon": "ğŸ”",
    "description": "åƒåŒ»ç”Ÿé—®è¯Šä¸€æ ·å®šä½ Bug ç—‡çŠ¶ï¼Œå½¢æˆè¯Šæ–­ä¹¦ï¼Œä¸æä¾›è§£å†³æ–¹æ¡ˆ",
    "is_builtin": True,
    "role_prompt": """ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ Bug è¯Šæ–­ä¸“å®¶ï¼Œæ­£åœ¨ã€Œè®¾è®¡é™¢ã€ä¸­å¸®åŠ©ç”¨æˆ·æ¢³ç†ä¸€ä¸ªè½¯ä»¶ç¼ºé™·ã€‚

## æ ¸å¿ƒèº«ä»½ï¼šè¯Šæ–­åŒ»ç”Ÿï¼Œåªé—®è¯Šä¸æ–½æ•‘
ä½ çš„èŒè´£æ˜¯é€šè¿‡ç³»ç»ŸåŒ–é—®è¯Šï¼Œå¸®åŠ©ç”¨æˆ·æŠŠ Bug çš„ç—‡çŠ¶ã€ç‰¹æ€§ã€å¤ç°æ–¹å¼æè¿°æ¸…æ¥šï¼Œå½¢æˆä¸€ä»½ç»“æ„åŒ–çš„ã€Œè¯Šæ–­ä¹¦ã€ã€‚
**ä½ ç»å¯¹ä¸è¦**ï¼š
- çŒœæµ‹æˆ–ä¸‹ç»“è®ºè¯´ Bug çš„æ ¹å› æ˜¯ä»€ä¹ˆ
- æä¾›ä»»ä½•ä¿®å¤æ–¹æ¡ˆã€ä»£ç è¡¥ä¸ã€æˆ–è§£å†³å»ºè®®
- è¯´"å¯èƒ½æ˜¯å› ä¸º..."ã€"å»ºè®®ä¿®æ”¹..."ä¹‹ç±»çš„è¯

è¯Šæ–­ä¹¦çš„ç›®çš„æ˜¯äº¤ç»™ä¸‹æ¸¸æ›´å¼ºçš„ç¼–ç æ¨¡å‹å»å®šä½å’Œä¿®å¤ï¼Œä½ åªè´Ÿè´£æŠŠé—®é¢˜æè¿°åˆ°ä½ã€‚""",
    "strategy_prompt": """## é—®è¯Šç­–ç•¥

### å¯¹è¯ç­–ç•¥
1. **ç—‡çŠ¶é‡‡é›†** â€” ç”¨æˆ·æŠ¥å‘Š Bug åï¼Œç«‹å³ç”¨ `ask_user` æå‡º 3-5 ä¸ªå®šä½é—®é¢˜ï¼š
   - å…·ä½“çš„é”™è¯¯ç°è±¡æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæˆªå›¾ã€æŠ¥é”™ä¿¡æ¯ã€å¼‚å¸¸è¡Œä¸ºï¼‰
   - æœŸæœ›çš„æ­£ç¡®è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿ
   - åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹å‡ºç°ï¼Ÿï¼ˆé¡µé¢ã€æ“ä½œæ­¥éª¤ã€æ•°æ®çŠ¶æ€ï¼‰
   - æ˜¯å¦ç¨³å®šå¤ç°ï¼Ÿå¤ç°æ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿ
   - ä»€ä¹ˆæ—¶å€™å¼€å§‹å‡ºç°çš„ï¼Ÿæœ€è¿‘æœ‰ä»€ä¹ˆå˜æ›´ï¼Ÿ
2. **ç¯å¢ƒä¿¡æ¯** â€” è¿½é—®è¿è¡Œç¯å¢ƒï¼šæµè§ˆå™¨ã€è®¾å¤‡ã€ç½‘ç»œã€æ•°æ®åº“çŠ¶æ€ç­‰
3. **å¤ç°éªŒè¯** â€” è¦æ±‚ç”¨æˆ·ç¡®è®¤å¤ç°æ­¥éª¤ï¼Œç¡®ä¿æ­¥éª¤å®Œæ•´ä¸”å¯é‡å¤
4. **è¾¹ç•Œæ¢æµ‹** â€” è¿½é—®è¾¹ç•Œæ¡ä»¶ï¼š
   - å…¶ä»–ç±»ä¼¼æ“ä½œæ˜¯å¦æ­£å¸¸ï¼Ÿ
   - æ¢ä¸€ç»„æ•°æ®æ˜¯å¦è¿˜æ˜¯å‡ºé—®é¢˜ï¼Ÿ
   - æ¸…ç¼“å­˜/é‡å¯åæ˜¯å¦è¿˜å¤ç°ï¼Ÿ
5. **åªè®°ä¸åˆ¤** â€” è®°å½•æ‰€æœ‰ç—‡çŠ¶ï¼Œä½†ä¸åšåŸå› æ¨æ–­

### ç»å¯¹ç¦åŒº
- âŒ ä¸è¦è¯´"è¿™ä¸ªé—®é¢˜å¯èƒ½æ˜¯å› ä¸º..."
- âŒ ä¸è¦è¯´"å»ºè®®ä½ ä¿®æ”¹..."
- âŒ ä¸è¦ç»™å‡ºä»»ä½•ä»£ç ç‰‡æ®µä½œä¸ºä¿®å¤æ–¹æ¡ˆ
- âŒ ä¸è¦è¯´"è¯•è¯•è¿™æ ·åš..."
- âœ… å¯ä»¥ç”¨å·¥å…·æŸ¥çœ‹ä»£ç æ¥**ç†è§£ç°æœ‰é€»è¾‘**ï¼Œä½†æŸ¥çœ‹ååªç”¨äºå®Œå–„é—®é¢˜æè¿°
- âœ… å¯ä»¥è¯´"æˆ‘æ³¨æ„åˆ°ç›¸å…³ä»£ç åœ¨ xxx æ–‡ä»¶"æ¥å¸®åŠ©å®šä½èŒƒå›´""",
    "finalization_prompt": """## å…³äºç”Ÿæˆè¯Šæ–­ä¹¦
å½“ç”¨æˆ·è¯´"æ•²å®š"æˆ–"å‡ºè¯Šæ–­ä¹¦"æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŸºäºé—®è¯Šè®°å½•ç”Ÿæˆç»“æ„åŒ–è¯Šæ–­ä¹¦ã€‚
åœ¨å®šç¨¿ä¹‹å‰ï¼Œä½ åº”è¯¥ä¸»åŠ¨ç¡®è®¤ï¼š
- Bug çš„ç—‡çŠ¶æè¿°æ˜¯å¦å®Œæ•´
- å¤ç°æ­¥éª¤æ˜¯å¦æ¸…æ™°å¯æ‰§è¡Œ
- å½±å“èŒƒå›´æ˜¯å¦æ˜ç¡®""",
    "output_generation_prompt": """åŸºäºä»¥ä¸‹é—®è¯Šè®°å½•ï¼Œç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„ **Bug è¯Šæ–­ä¹¦**ã€‚

## å†™ä½œåŸåˆ™
1. **åªæè¿°ç—‡çŠ¶ï¼Œä¸åˆ†æåŸå› **ï¼šè¯¦ç»†æè¿°"æ˜¯ä»€ä¹ˆ"å’Œ"æ€ä¹ˆå¤ç°"ï¼Œç»ä¸æ¨æµ‹"ä¸ºä»€ä¹ˆ"ã€‚
2. **æ­¥éª¤å¯æ‰§è¡Œ**ï¼šå¤ç°æ­¥éª¤å¿…é¡»ç²¾ç¡®åˆ°å¯ä»¥è®©å¦ä¸€ä¸ªäººæŒ‰æ­¥æ“ä½œå¤ç°ã€‚
3. **ä¿¡æ¯åˆ†å±‚**ï¼šä»æ¦‚è¿°åˆ°ç»†èŠ‚ï¼Œç»“æ„æ¸…æ™°ã€‚
4. **ä¸¥æ ¼åŸºäºé—®è¯Šå†…å®¹**ï¼šä¸æ·»åŠ é—®è¯Šä¸­æœªæ¶‰åŠçš„ä¿¡æ¯ã€‚

## è¾“å‡ºæ ¼å¼

### Bug æ¦‚è¿°
ä¸€æ®µè¯æè¿°ï¼šä»€ä¹ˆåŠŸèƒ½ã€å‡ºäº†ä»€ä¹ˆé—®é¢˜ã€å½±å“èŒƒå›´ã€‚

### ç—‡çŠ¶æè¿°
- **é¢„æœŸè¡Œä¸º**: åº”è¯¥æ€æ ·
- **å®é™…è¡Œä¸º**: å®é™…æ€æ ·
- **é”™è¯¯ä¿¡æ¯**: æ§åˆ¶å°æŠ¥é”™ã€é¡µé¢æç¤ºç­‰ï¼ˆå¦‚æœ‰ï¼‰

### å¤ç°æ­¥éª¤
ç¼–å·åˆ—è¡¨ï¼Œæ¯æ­¥åŒ…å«ï¼šå…·ä½“æ“ä½œ + é¢„æœŸç»“æœ + å®é™…ç»“æœ

### ç¯å¢ƒä¿¡æ¯
- æµè§ˆå™¨/è®¾å¤‡/ç³»ç»Ÿ
- æ•°æ®æ¡ä»¶
- ç½‘ç»œç¯å¢ƒ

### å½±å“èŒƒå›´
- å½±å“çš„åŠŸèƒ½æ¨¡å—
- å½±å“çš„ç”¨æˆ·ç¾¤ä½“
- ä¸¥é‡ç¨‹åº¦è¯„ä¼°

### ç›¸å…³ä»£ç å®šä½
- ç›¸å…³æ–‡ä»¶è·¯å¾„ï¼ˆä»…å½“é—®è¯Šä¸­ä½¿ç”¨äº†ä»£ç æŸ¥çœ‹å·¥å…·æ—¶åˆ—å‡ºï¼‰
- ä¸åŒ…å«ä»»ä½•ä¿®å¤å»ºè®®

### è¡¥å……ä¿¡æ¯
é—®è¯Šä¸­å‘ç°çš„å…¶ä»–ç›¸å…³çº¿ç´¢ã€‚

---

é—®è¯Šè®°å½•ï¼š
{discussion_summary}

è¯·ç›´æ¥è¾“å‡ºè¯Šæ–­ä¹¦å†…å®¹ï¼ˆä¸éœ€è¦ä»£ç å—åŒ…è£¹ï¼‰:""",
    "stages": [
        {"key": "draft", "label": "æŠ¥å‘Š", "status": "draft"},
        {"key": "discussing", "label": "é—®è¯Š", "status": "discussing"},
        {"key": "planned", "label": "ç¡®è®¤", "status": "planned"},
        {"key": "implementing", "label": "ä¿®å¤", "status": "implementing"},
        {"key": "reviewing", "label": "éªŒè¯", "status": "reviewing"},
        {"key": "deploying", "label": "éƒ¨ç½²", "status": "deploying"},
        {"key": "deployed", "label": "å…³é—­", "status": "deployed"},
    ],
    "ui_labels": {
        "project_noun": "ç¼ºé™·",
        "create_title": "ğŸ› æ–°å»ºç¼ºé™·",
        "create_placeholder": "ç®€æ˜æè¿° Bug ç°è±¡",
        "description_placeholder": "æè¿° Bug çš„å…·ä½“è¡¨ç°ã€å‡ºç°åœºæ™¯...",
        "output_noun": "è¯Šæ–­ä¹¦",
        "output_tab_label": "ğŸ“‹ è¯Šæ–­ä¹¦",
        "finalize_action": "ç”Ÿæˆè¯Šæ–­ä¹¦",
    },
}
```

---

## å››ã€åˆ†é˜¶æ®µå®æ–½æ­¥éª¤

### Phase 1: æ•°æ®åŸºç¡€ + Skill ç®¡ç†ç•Œé¢

**ç›®æ ‡**ï¼šå»ºç«‹ Skill è¡¨ã€CRUD APIã€ç®¡ç† UIï¼Œå°†ç°æœ‰ç¡¬ç¼–ç æå–ä¸ºç§å­æ•°æ®ã€‚

#### Step 1.1 â€” åç«¯æ•°æ®æ¨¡å‹ âœ…

| æ“ä½œ | æ–‡ä»¶ | å†…å®¹ |
|------|------|------|
| æ–°å¢ `Skill` æ¨¡å‹ | `studio/backend/models.py` | æ·»åŠ  Skill ç±»ï¼ˆè§ä¸Šæ–¹æ•°æ®æ¨¡å‹ï¼‰ |
| Project æ·»åŠ  `skill_id` | `studio/backend/models.py` | `Project.skill_id` å¤–é”® + relationship |
| è‡ªåŠ¨è¿ç§» | `studio/backend/main.py` â†’ `_auto_migrate()` | æ–°å¢ `projects.skill_id` åˆ—è¿ç§» |
| ç§å­æ•°æ® | `studio/backend/main.py` â†’ `lifespan()` | æ–°å¢ `seed_skills()` åˆå§‹åŒ–ä¸¤ä¸ªå†…ç½® Skill |

#### Step 1.2 â€” åç«¯ Skill CRUD API âœ…

æ–°å»º `studio/backend/api/skills.py`ï¼š

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/studio-api/skills` | GET | åˆ—å‡ºæ‰€æœ‰æŠ€èƒ½ï¼ˆæ”¯æŒ `?enabled_only=true`ï¼‰ |
| `/studio-api/skills/{id}` | GET | è·å–å•ä¸ªæŠ€èƒ½è¯¦æƒ… |
| `/studio-api/skills` | POST | åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½ |
| `/studio-api/skills/{id}` | PUT | æ›´æ–°æŠ€èƒ½é…ç½® |
| `/studio-api/skills/{id}` | DELETE | åˆ é™¤æŠ€èƒ½ï¼ˆå†…ç½®æŠ€èƒ½ç¦æ­¢åˆ é™¤ï¼‰ |
| `/studio-api/skills/{id}/duplicate` | POST | å¤åˆ¶æŠ€èƒ½ï¼ˆåŸºäºå†…ç½®æŠ€èƒ½åˆ›å»ºå˜ä½“ï¼‰ |

åœ¨ `studio/backend/main.py` æ³¨å†Œè·¯ç”±ã€‚

#### Step 1.3 â€” å‰ç«¯ Skill ç®¡ç†ç•Œé¢ âœ…

æ–°å»º `studio/frontend/src/views/settings/SkillSettings.vue`ï¼Œæ·»åŠ åˆ°è®¾ç½®é¡µ Tabï¼š

**åˆ—è¡¨è§†å›¾**ï¼š
- å¡ç‰‡å¼å¸ƒå±€ï¼Œæ¯ä¸ª Skill æ˜¾ç¤ºï¼šå›¾æ ‡ + åç§° + æè¿° + å¯ç”¨å¼€å…³ + å†…ç½®æ ‡è®°
- æ“ä½œæŒ‰é’®ï¼šç¼–è¾‘ã€å¤åˆ¶ã€åˆ é™¤ï¼ˆå†…ç½®æŠ€èƒ½åªèƒ½ç¼–è¾‘ prompt ä¸èƒ½åˆ é™¤ï¼‰
- åº•éƒ¨"åˆ›å»ºæ–°æŠ€èƒ½"æŒ‰é’®

**ç¼–è¾‘è§†å›¾**ï¼ˆModal æˆ–ç‹¬ç«‹é¡µé¢ï¼‰ï¼š
- åŸºæœ¬ä¿¡æ¯ï¼šåç§°ã€å›¾æ ‡ã€æè¿°
- AI é…ç½®é¢æ¿ï¼šè§’è‰²å®šä¹‰ï¼ˆtextareaï¼‰ã€å¯¹è¯ç­–ç•¥ï¼ˆtextareaï¼‰ã€å·¥å…·ç­–ç•¥ï¼ˆtextareaï¼‰ã€å®šç¨¿æç¤ºï¼ˆtextareaï¼‰ã€äº§å‡ºç‰©ç”Ÿæˆæ¨¡æ¿ï¼ˆtextareaï¼Œå¸¦ `{discussion_summary}` å˜é‡æç¤ºï¼‰
- é˜¶æ®µé…ç½®ï¼šå¯æ‹–æ‹½æ’åºçš„é˜¶æ®µåˆ—è¡¨ï¼Œæ¯é¡¹å« key + label
- UI æ–‡æ¡ˆé…ç½®ï¼škey-value è¡¨å•
- é¢„è§ˆé¢æ¿ï¼šå®æ—¶é¢„è§ˆæœ€ç»ˆ system prompt ç»„è£…æ•ˆæœ

#### Step 1.4 â€” å‰ç«¯ API æ¨¡å— âœ…

åœ¨ `studio/frontend/src/api/` ä¸­æ–°å¢ skill ç›¸å…³ API è°ƒç”¨ï¼ˆæˆ–æ·»åŠ åˆ°ç°æœ‰ api æ¨¡å—ï¼‰ã€‚

æ–°å¢ Pinia store `studio/frontend/src/stores/skill.ts`ï¼š
- `skills: Skill[]`
- `fetchSkills()`, `getSkill(id)`, `createSkill()`, `updateSkill()`, `deleteSkill()`
- `enabledSkills` computedï¼ˆç»™é¡¹ç›®åˆ›å»ºä¸‹æ‹‰ç”¨ï¼‰

---

### Phase 2: è¿è¡Œæ—¶ Skill æ³¨å…¥

**ç›®æ ‡**ï¼šé¡¹ç›®åˆ›å»ºæ—¶é€‰æ‹© Skillï¼Œè¿è¡Œæ—¶æ ¹æ® Skill é…ç½®é©±åŠ¨ promptã€é˜¶æ®µã€UI æ–‡æ¡ˆã€‚

#### Step 2.1 â€” é¡¹ç›®åˆ›å»ºæµç¨‹æ”¹é€  âœ…

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `Dashboard.vue` æ–°å»ºå¯¹è¯æ¡† | å¢åŠ  Skill é€‰æ‹©å™¨ï¼ˆå›¾æ ‡å¡ç‰‡å¼ï¼Œé»˜è®¤é€‰ä¸­"éœ€æ±‚åˆ†æ"ï¼‰ |
| `Dashboard.vue` æ ‡é¢˜ / æ–‡æ¡ˆ | åŠ¨æ€æ›¿æ¢ï¼š"æ–°å»ºéœ€æ±‚" â†’ `skill.ui_labels.create_title` |
| `ProjectList.vue` ç­›é€‰ | å¢åŠ æŒ‰ Skill ç±»å‹ç­›é€‰ |
| `StudioLayout.vue` èœå• | "éœ€æ±‚é¡¹ç›®" â†’ "é¡¹ç›®"ï¼ˆé€šç”¨åŒ–ï¼‰ |

åç«¯ `POST /studio-api/projects` çš„è¯·æ±‚ä½“æ–°å¢ `skill_id` å­—æ®µã€‚

#### Step 2.2 â€” context_service æ”¹é€  âœ…

`build_project_context()` ç­¾åå˜æ›´ï¼š

```python
def build_project_context(
    skill: Optional[Skill] = None,  # æ–°å¢
    extra_context: str = "",
    budget_tokens: int = 0,
    return_sections: bool = False,
) -> Union[str, Tuple[str, List]]:
```

æ ¸å¿ƒæ”¹åŠ¨é€»è¾‘ï¼š

```python
if skill:
    role_text = skill.role_prompt
    strategy_text = skill.strategy_prompt
    tool_strategy_text = skill.tool_strategy_prompt or DEFAULT_TOOL_STRATEGY
    finalization_text = skill.finalization_prompt or ""
else:
    # å…¼å®¹æ—§é¡¹ç›®ï¼šä½¿ç”¨ç°æœ‰ç¡¬ç¼–ç ï¼ˆåç»­è¿ç§»åå¯ç§»é™¤ï¼‰
    role_text = LEGACY_ROLE_PROMPT
    ...

named_parts = [("è§’è‰²å®šä¹‰", role_text)]
if strategy_text:
    named_parts.append(("å¯¹è¯ç­–ç•¥", strategy_text))
# ... é¡¹ç›®æ ‘ã€ç›®å½•ã€æ–‡ä»¶ç­‰åŠ¨æ€éƒ¨åˆ†ä¸å˜
if finalization_text:
    named_parts.append(("å®šç¨¿æç¤º", finalization_text))
if extra_context:
    named_parts.append(("é¡¹ç›®ä¸Šä¸‹æ–‡", extra_context))
if tool_strategy_text:
    named_parts.append(("å·¥å…·ä½¿ç”¨ç­–ç•¥", tool_strategy_text))
```

`build_plan_generation_prompt()` æ”¹é€ ï¼š

```python
def build_plan_generation_prompt(
    discussion_summary: str,
    skill: Optional[Skill] = None,
) -> str:
    if skill and skill.output_generation_prompt:
        return skill.output_generation_prompt.replace("{discussion_summary}", discussion_summary)
    return LEGACY_PLAN_GENERATION_PROMPT.format(discussion_summary=discussion_summary)
```

#### Step 2.3 â€” discussion.py æ³¨å…¥ Skill âœ…

```python
# è·å–é¡¹ç›®å…³è”çš„ skill
skill = None
if project.skill_id:
    skill_result = await db.execute(select(Skill).where(Skill.id == project.skill_id))
    skill = skill_result.scalar_one_or_none()

# æ„å»º extra_contextï¼ˆæ ¹æ® skill é€‚é…æ–‡æ¡ˆï¼‰
noun = "éœ€æ±‚"
if skill and skill.ui_labels:
    noun = skill.ui_labels.get("project_noun", "éœ€æ±‚")
extra_parts = [f"\n## å½“å‰{noun}\næ ‡é¢˜: {project.title}\næè¿°: {project.description}"]

# æ„å»º system_prompt ä¼ å…¥ skill
system_prompt, system_sections = context_service.build_project_context(
    skill=skill,
    extra_context="\n".join(extra_parts),
    budget_tokens=system_budget,
    return_sections=True,
)
```

å®šç¨¿ API åŒç†ä¼ å…¥ `skill`ã€‚

#### Step 2.4 â€” å‰ç«¯åŠ¨æ€é˜¶æ®µæ¸²æŸ“ âœ…

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `ProjectDetail.vue` | `stepLabels` ä» `project.skill.stages` åŠ¨æ€è·å–ï¼Œfallback åˆ°é»˜è®¤å€¼ |
| `ProjectDetail.vue` | `statusLabel()` æ ¹æ® `skill.stages` æ˜ å°„ |
| `ProjectDetail.vue` | è®¾è®¡ç¨¿ Tab æ ‡ç­¾ç”¨ `skill.ui_labels.output_tab_label` |
| `ChatPanel.vue` | å®šç¨¿æŒ‰é’®æ–‡æ¡ˆç”¨ `skill.ui_labels.finalize_action` |

**å®ç°æ–¹å¼**ï¼šProject API è¿”å›æ—¶ eager-load `skill` å…³ç³»ï¼Œå‰ç«¯ `project.skill.stages` / `project.skill.ui_labels` ç›´æ¥ä½¿ç”¨ã€‚

#### Step 2.5 â€” Skill ä¿¡æ¯é€šè¿‡ API è¿”å› âœ…

`GET /studio-api/projects/{id}` å“åº”ä½“æ–°å¢ `skill` åµŒå¥—å¯¹è±¡ï¼ˆåªå« `id`, `name`, `icon`, `stages`, `ui_labels`ï¼‰ï¼Œé¿å…åŠ¨æ€æŸ¥è¯¢ã€‚

---

### Phase 3: éªŒè¯ & å®Œå–„

**ç›®æ ‡**ï¼šç”¨ Bug é—®è¯Š Skill éªŒè¯æ¡†æ¶é€šç”¨æ€§ï¼Œä¿®å¤è¾¹ç•Œé—®é¢˜ã€‚

#### Step 3.1 â€” éªŒè¯åœºæ™¯ âœ…

1. åˆ›å»ºä¸€ä¸ª Bug é—®è¯Šé¡¹ç›®ï¼ŒéªŒè¯ï¼š
   - AI è§’è‰²ä¸º"è¯Šæ–­ä¸“å®¶"è€Œé"äº§å“ç»ç†"
   - æé—®é£æ ¼èšç„¦ç—‡çŠ¶/å¤ç°è€Œééœ€æ±‚
   - ä¸ä¼šç»™å‡ºä¿®å¤å»ºè®®
   - é˜¶æ®µæ˜¾ç¤ºä¸º"æŠ¥å‘Šâ†’é—®è¯Šâ†’ç¡®è®¤â†’..."
   - äº§å‡ºç‰©ä¸º"è¯Šæ–­ä¹¦"æ ¼å¼
2. åˆ›å»ºä¸€ä¸ªéœ€æ±‚åˆ†æé¡¹ç›®ï¼ŒéªŒè¯æ—§åŠŸèƒ½ä¸å—å½±å“
3. æµ‹è¯• Skill ç®¡ç†ç•Œé¢ CRUD æ“ä½œ

#### Step 3.2 â€” æ—§é¡¹ç›®å…¼å®¹ âœ…

- `skill_id IS NULL` çš„æ—§é¡¹ç›®ä½¿ç”¨å†…ç½®"éœ€æ±‚åˆ†æ"æŠ€èƒ½è¡Œä¸º
- âœ… å·²å®ç°ä¸€æ¬¡æ€§è¿ç§» `_migrate_null_skill_projects()`ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨ä¸º `skill_id IS NULL` çš„é¡¹ç›®è®¾ç½®é»˜è®¤ skill_id

#### Step 3.3 â€” ç¤ºä¾‹ç¬¬ä¸‰æŠ€èƒ½ âœ…

âœ… å·²ä½œä¸ºç¬¬ä¸‰ä¸ªå†…ç½®æŠ€èƒ½åŠ å…¥ `BUILTIN_SKILLS` seedï¼Œå¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºï¼š
- åç§°ï¼šå®ç°å®¡æŸ¥ï¼ˆicon: âœ…ï¼‰
- è§’è‰²ï¼šä»£ç å®¡æŸ¥å‘˜
- ç­–ç•¥ï¼šå¯¹ç…§éœ€æ±‚é€é¡¹æ£€æŸ¥å®ç°å®Œæˆåº¦ï¼ŒæŒ‰ âœ…/âš ï¸/âŒ åˆ†çº§
- äº§å‡ºï¼šç»“æ„åŒ–å®¡æŸ¥æŠ¥å‘Š

---

### Phase 4: è§£è€¦å‡†å¤‡ï¼ˆåç»­ï¼‰

**ç›®æ ‡**ï¼šä¸º Studio ç‹¬ç«‹æˆé¡¹ç›®åšå‡†å¤‡ã€‚

| è§£è€¦é¡¹ | å½“å‰çŠ¶æ€ | ç›®æ ‡ |
|--------|---------|------|
| ç›®æ ‡é¡¹ç›®è·¯å¾„ | ç¡¬ç¼–ç  `KEY_FILES`, `KEY_DIRS` æŒ‡å‘ GoldenNest | Skill æˆ–å…¨å±€è®¾ç½®é…ç½® `workspace_path` |
| é¡¹ç›®æ¦‚å†µ | ç¡¬ç¼–ç  "å®¶åº­è´¢å¯Œç®¡ç†" | ä» workspace çš„ README / CLAUDE.md è‡ªåŠ¨æå– |
| éƒ¨ç½²æµç¨‹ | ç¡¬ç¼–ç  docker-compose | å¯é…ç½®çš„éƒ¨ç½²è„šæœ¬æ¨¡æ¿ |
| æ•°æ®åº“ | ä¸ GoldenNest å…±ç”¨ data/ ç›®å½• | ç‹¬ç«‹ studio-data/ |

---

## äº”ã€æ¶‰åŠæ–‡ä»¶æ¸…å•

### åç«¯æ–°å¢
| æ–‡ä»¶ | æè¿° |
|------|------|
| `studio/backend/api/skills.py` | Skill CRUD API |

### åç«¯ä¿®æ”¹
| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `studio/backend/models.py` | æ–°å¢ `Skill` æ¨¡å‹ï¼Œ`Project` å¢åŠ  `skill_id` |
| `studio/backend/main.py` | æ³¨å†Œ skills è·¯ç”±ï¼Œauto_migrate æ·»åŠ  skill_idï¼Œseed_skills() |
| `studio/backend/services/context_service.py` | `build_project_context()` æ¥å— Skill å‚æ•°ï¼ŒåŠ¨æ€ç»„è£… prompt |
| `studio/backend/api/discussion.py` | è¯»å–é¡¹ç›® skillï¼Œä¼ å…¥ context_service |
| `studio/backend/api/projects.py` | åˆ›å»ºé¡¹ç›®æ”¯æŒ skill_idï¼Œè¿”å›å…³è” skill |

### å‰ç«¯æ–°å¢
| æ–‡ä»¶ | æè¿° |
|------|------|
| `studio/frontend/src/views/settings/SkillSettings.vue` | Skill ç®¡ç†ç•Œé¢ |
| `studio/frontend/src/stores/skill.ts` | Skill Pinia store |

### å‰ç«¯ä¿®æ”¹
| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `studio/frontend/src/views/Dashboard.vue` | åˆ›å»ºå¯¹è¯æ¡†å¢åŠ  Skill é€‰æ‹©å™¨ï¼ŒåŠ¨æ€æ–‡æ¡ˆ |
| `studio/frontend/src/views/ProjectDetail.vue` | stepLabels/statusLabel ä» skill åŠ¨æ€è·å– |
| `studio/frontend/src/views/ProjectList.vue` | å¢åŠ  Skill ç­›é€‰ï¼ŒåŠ¨æ€ status æ ‡ç­¾ |
| `studio/frontend/src/views/StudioLayout.vue` | èœå•æ–‡æ¡ˆï¼š"éœ€æ±‚é¡¹ç›®" â†’ "é¡¹ç›®" |
| `studio/frontend/src/components/ChatPanel.vue` | å®šç¨¿æŒ‰é’®æ–‡æ¡ˆåŠ¨æ€åŒ– |
| Settings è·¯ç”±/Tab | å¢åŠ "æŠ€èƒ½ç®¡ç†"Tab |

---

## å…­ã€éªŒè¯æ–¹æ¡ˆ

### è‡ªåŠ¨åŒ–
- åç«¯ï¼šSkill CRUD API æ­£ç¡®æ€§ï¼ˆåˆ›å»º/è¯»å–/æ›´æ–°/åˆ é™¤/åˆ—è¡¨/å¤åˆ¶ï¼‰
- ç§å­æ•°æ®ï¼šå¯åŠ¨åä¸¤ä¸ªå†…ç½® Skill è‡ªåŠ¨åˆ›å»º
- è‡ªåŠ¨è¿ç§»ï¼šæ—§ DB å‡çº§æ­£ç¡®æ·»åŠ  skill_id åˆ—

### æ‰‹åŠ¨éªŒè¯
1. **éœ€æ±‚åˆ†æé¡¹ç›®**ï¼šè¡Œä¸ºä¸æ”¹é€ å‰å®Œå…¨ä¸€è‡´
2. **Bug é—®è¯Šé¡¹ç›®**ï¼šAI ä»¥è¯Šæ–­ä¸“å®¶è§’è‰²å¯¹è¯ï¼Œä¸ç»™ä¿®å¤æ–¹æ¡ˆï¼Œäº§å‡ºè¯Šæ–­ä¹¦
3. **Skill ç®¡ç†**ï¼šåˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½ â†’ ç”¨è¯¥æŠ€èƒ½åˆ›å»ºé¡¹ç›® â†’ AI è¡Œä¸ºç¬¦åˆé…ç½®
4. **å…¼å®¹æ€§**ï¼šæ—§é¡¹ç›®ï¼ˆ`skill_id=NULL`ï¼‰æ­£å¸¸ä½¿ç”¨

### å…³é”®æ£€æŸ¥ç‚¹
- [x] `context_service.build_project_context(skill=...)` æ­£ç¡®ç»„è£… prompt
- [x] `build_plan_generation_prompt(skill=...)` ä½¿ç”¨ skill çš„äº§å‡ºæ¨¡æ¿
- [x] ProjectDetail é˜¶æ®µæ¡æ ¹æ® skill.stages æ¸²æŸ“
- [x] Dashboard åˆ›å»ºå¯¹è¯æ¡†æ ¹æ® skill.ui_labels æ˜¾ç¤ºæ–‡æ¡ˆ
- [x] å†…ç½® Skill ä¸å¯åˆ é™¤
- [x] ç¦ç”¨çš„ Skill ä¸å‡ºç°åœ¨åˆ›å»ºé¡¹ç›®çš„é€‰æ‹©å™¨ä¸­

---

## ä¸ƒã€å†³ç­–è®°å½•

| å†³ç­– | é€‰æ‹© | åŸå›  |
|------|------|------|
| Skill å­˜å‚¨æ–¹å¼ | DB è¡¨ | æ•°æ®é©±åŠ¨ï¼Œè¿è¡Œæ—¶å¯ä¿®æ”¹ï¼Œæ”¯æŒç®¡ç† UI |
| ProjectStatus æšä¸¾ | ä¿æŒä¸å˜ | stages åªæ§åˆ¶ UI æ˜¾ç¤ºï¼Œåº•å±‚çŠ¶æ€å¤ç”¨åŒä¸€å¥—æšä¸¾ |
| æ—§é¡¹ç›®å…¼å®¹ | `skill_id=NULL` fallback å†…ç½®é»˜è®¤ | é›¶è¿ç§»æˆæœ¬ |
| ç›®æ ‡é¡¹ç›®è·¯å¾„è§£è€¦ | å»¶è¿Ÿåˆ° Phase 4 | å½“å‰ä¼˜å…ˆå®Œæˆ Skill æ¡†æ¶ |
| Skill prompt å˜é‡ | ä»… `{discussion_summary}` | ä¿æŒç®€å•ï¼ŒæŒ‰éœ€æ‰©å±• |
| ask_user å·¥å…·å®šä¹‰ | ä¸æŒ‰ Skill å®šåˆ¶ | å·¥å…·è¡Œä¸ºç”± prompt ç­–ç•¥æ§åˆ¶å³å¯ |
