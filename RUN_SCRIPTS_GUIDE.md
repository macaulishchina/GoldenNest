# Golden Nest å¯åŠ¨è„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ¯ è®¾è®¡ç›®æ ‡

å®ç°AIæµ‹è¯•å’Œæ‰‹åŠ¨å¼€å‘çš„æ™ºèƒ½æœåŠ¡ç®¡ç†ï¼š
- âœ… **ç”¨æˆ·å¯åŠ¨æœåŠ¡** â†’ å¯ä»¥è‡ªåŠ¨ç»ˆæ­¢AIçš„æœåŠ¡å¹¶é‡å¯
- âœ… **AIå¯åŠ¨æœåŠ¡** â†’ å¿…é¡»å¤ç”¨ç”¨æˆ·çš„æœåŠ¡ï¼Œä¸èƒ½ç»ˆæ­¢
- âœ… **æ•°æ®åº“è‡ªåŠ¨è¿ç§»** â†’ æ¨¡å‹ä¿®æ”¹åé‡å¯è‡ªåŠ¨åŒæ­¥schemaï¼Œæ·»åŠ ç¼ºå¤±å­—æ®µ
- âœ… é¿å…ç«¯å£å†²çªå’Œé‡å¤å¯åŠ¨
- âœ… äº’ä¸å¹²æ‰°çš„å¼€å‘æµ‹è¯•ç¯å¢ƒ

## ğŸ“‹ è„šæœ¬è¯´æ˜

### ç”¨æˆ·è„šæœ¬ï¼ˆæ‰‹åŠ¨å¼€å‘ä½¿ç”¨ï¼‰
- `backend/run.bat` / `backend/run.sh` - æ ‡è®°ä¸ºUSERå¯åŠ¨ï¼Œä½¿ç”¨ç«¯å£8000
- `frontend/run.bat` / `frontend/run.sh` - æ ‡è®°ä¸ºUSERå¯åŠ¨ï¼Œä½¿ç”¨ç«¯å£5173

### AIè„šæœ¬ï¼ˆAIæµ‹è¯•ä½¿ç”¨ï¼‰
- `backend/run_ai.bat` / `backend/run_ai.sh` - æ ‡è®°ä¸ºAIå¯åŠ¨ï¼Œä½¿ç”¨ç«¯å£8000ï¼ˆå¤ç”¨ç”¨æˆ·æœåŠ¡ï¼‰
- `frontend/run_ai.bat` / `frontend/run_ai.sh` - æ ‡è®°ä¸ºAIå¯åŠ¨ï¼Œä½¿ç”¨ç«¯å£5173ï¼ˆå¤ç”¨ç”¨æˆ·æœåŠ¡ï¼‰

### AIä¸´æ—¶æµ‹è¯•è„šæœ¬ï¼ˆç‹¬ç«‹ç«¯å£æµ‹è¯•ï¼‰
- `backend/run_test.bat` / `backend/run_test.sh` - ä¸´æ—¶æµ‹è¯•ç«¯å£8001ï¼Œäº’ä¸å¹²æ‰°
- `frontend/run_test.bat` / `frontend/run_test.sh` - ä¸´æ—¶æµ‹è¯•ç«¯å£5174ï¼Œäº’ä¸å¹²æ‰°
- `cleanup_test.bat` / `cleanup_test.sh` - æ¸…ç†ä¸´æ—¶æµ‹è¯•æœåŠ¡

## ğŸ”„ æ™ºèƒ½æœåŠ¡ç®¡ç†

### åœºæ™¯1ï¼šç”¨æˆ·å¯åŠ¨æœåŠ¡ï¼ˆæœ€å¸¸ç”¨ï¼‰

å½“ä½ è¿è¡Œ `run.bat` æˆ– `run.sh` æ—¶ï¼š

**å¦‚æœæœåŠ¡æœªè¿è¡Œ** â†’ æ­£å¸¸å¯åŠ¨ï¼Œæ ‡è®°ä¸ºUSER

**å¦‚æœAIå·²å¯åŠ¨æœåŠ¡** â†’ è‡ªåŠ¨ç»ˆæ­¢AIæœåŠ¡ï¼Œé‡æ–°å¯åŠ¨USERæœåŠ¡
```
âš ï¸  Backend server started by AI is running on port 8000
ğŸ”„ Terminating AI service and starting user service...
```

**å¦‚æœä½ å·²å¯åŠ¨æœåŠ¡** â†’ æç¤ºå·²è¿è¡Œï¼Œä¸é‡å¤å¯åŠ¨
```
â„¹ï¸  Backend server is already running on port 8000
ğŸ’¡ Server is already started by you
```

### åœºæ™¯2ï¼šAIå¯åŠ¨æœåŠ¡ï¼ˆè‡ªåŠ¨æµ‹è¯•ï¼‰

å½“AIè¿è¡Œ `run_ai.bat` æˆ– `run_ai.sh` æ—¶ï¼š

**å¦‚æœç”¨æˆ·å·²å¯åŠ¨æœåŠ¡** â†’ å¤ç”¨ç”¨æˆ·æœåŠ¡ï¼Œä¸ç»ˆæ­¢
```
â„¹ï¸  Backend server already running (started by user)
ğŸ“ Reusing existing service at: http://127.0.0.1:8000
```

**å¦‚æœAIå·²å¯åŠ¨æœåŠ¡** â†’ æ£€æµ‹åˆ°å·²è¿è¡Œï¼Œç›´æ¥ä½¿ç”¨

**å¦‚æœæœåŠ¡æœªè¿è¡Œ** â†’ å¯åŠ¨æ–°æœåŠ¡ï¼Œæ ‡è®°ä¸ºAI

### åœºæ™¯3ï¼šAIä¸´æ—¶æ¥å£æµ‹è¯•ï¼ˆæ¨èAIä½¿ç”¨ï¼‰

å½“AIè¿›è¡Œä¸´æ—¶æ¥å£æµ‹è¯•æ—¶ï¼Œä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•ç«¯å£ï¼š

**ä½¿ç”¨ä¸´æ—¶æµ‹è¯•è„šæœ¬** â†’ å¯åŠ¨ç‹¬ç«‹ç«¯å£æœåŠ¡
```bash
# Windows
backend\run_test.bat    # ç«¯å£8001
frontend\run_test.bat   # ç«¯å£5174

# Linux/macOS
backend/run_test.sh     # ç«¯å£8001
frontend/run_test.sh    # ç«¯å£5174
```

**æµ‹è¯•å®Œæˆåæ¸…ç†**ï¼š
```bash
# Windows
cleanup_test.bat

# Linux/macOS  
./cleanup_test.sh
```

**ä¼˜åŠ¿**ï¼š
- âœ… å®Œå…¨ä¸å½±å“ç”¨æˆ·å¼€å‘ç¯å¢ƒï¼ˆç«¯å£8000/5173ï¼‰
- âœ… AIå¯ä»¥ç‹¬ç«‹æµ‹è¯•æ¥å£
- âœ… æµ‹è¯•å®Œæˆåä¸€é”®æ¸…ç†
- âœ… å¤šä¸ªæµ‹è¯•å¯ä»¥å¹¶è¡Œè¿›è¡Œ

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### æ—¥å¸¸å¼€å‘ï¼ˆæ¨èï¼‰

```bash
# Windows
cd backend
run.bat

cd frontend  
run.bat

# Linux/macOS
cd backend
./run.sh

cd frontend
./run.sh
```

è¿™æ ·å¯åŠ¨çš„æœåŠ¡ï¼š
- âœ… ä¼šè¢«æ ‡è®°ä¸ºUSER
- âœ… AIæµ‹è¯•æ—¶ä¼šå¤ç”¨ä½ çš„æœåŠ¡
- âœ… ä½ å¯ä»¥éšæ—¶ç»ˆæ­¢AIå¯åŠ¨çš„æœåŠ¡

### AIè‡ªåŠ¨æµ‹è¯•

æˆ‘ä¼šä½¿ç”¨ `run_ai.bat` æˆ– `run_ai.sh`ï¼š
- âœ… å¦‚æœä½ çš„æœåŠ¡åœ¨è¿è¡Œï¼Œæˆ‘ä¼šå¤ç”¨å®ƒ
- âœ… å¦‚æœæ²¡æœ‰æœåŠ¡ï¼Œæˆ‘ä¼šå¯åŠ¨å¹¶æ ‡è®°ä¸ºAI
- âœ… ä¸ä¼šç»ˆæ­¢ä½ çš„æœåŠ¡

## ï¿½ æŠ€æœ¯å®ç°

### æœåŠ¡æ ‡è®°æœºåˆ¶
ä½¿ç”¨éšè—æ–‡ä»¶æ ‡è®°æœåŠ¡å¯åŠ¨è€…ï¼š
- `.backend_owner` - æ ‡è®°backendæœåŠ¡å¯åŠ¨è€…ï¼ˆUSERæˆ–AIï¼‰
- `.frontend_owner` - æ ‡è®°frontendæœåŠ¡å¯åŠ¨è€…ï¼ˆUSERæˆ–AIï¼‰
### æ•°æ®åº“è‡ªåŠ¨è¿ç§» ğŸŒŸ
**Backendå¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œ**ï¼š
1. **åˆ›å»ºæ–°è¡¨** - å¦‚æœæ¨¡å‹ä¸­å®šä¹‰äº†æ–°è¡¨ï¼Œè‡ªåŠ¨åˆ›å»º
2. **æ·»åŠ ç¼ºå¤±åˆ—** - è‡ªåŠ¨æ£€æµ‹å¹¶æ·»åŠ æ¨¡å‹ä¸­æ–°å¢çš„å­—æ®µ
3. **ä¿æŒæ•°æ®å®‰å…¨** - åªåšåŠ åˆ—æ“ä½œï¼Œä¸ä¼šåˆ é™¤æˆ–ä¿®æ”¹ç°æœ‰æ•°æ®

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… ä¿®æ”¹äº† `backend/app/models/models.py` ä¸­çš„æ¨¡å‹å®šä¹‰
- âœ… æ·»åŠ äº†æ–°çš„å­—æ®µåˆ°ç°æœ‰æ¨¡å‹
- âœ… åˆ›å»ºäº†æ–°çš„æ¨¡å‹ç±»

**æ“ä½œæ­¥éª¤**ï¼š
1. ä¿®æ”¹æ¨¡å‹æ–‡ä»¶ï¼ˆæ·»åŠ å­—æ®µæˆ–æ–°æ¨¡å‹ï¼‰
2. é‡å¯backendæœåŠ¡ï¼ˆè¿è¡Œ `run.bat` æˆ– `run.sh`ï¼‰
3. ç³»ç»Ÿè‡ªåŠ¨åŒæ­¥æ•°æ®åº“schema
4. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„è¿ç§»æ—¥å¿—

**ç¤ºä¾‹è¾“å‡º**ï¼š
```
[auto-migrate] ALTER TABLE users ADD COLUMN avatar VARCHAR(255)
[auto-migrate] ALTER TABLE family ADD COLUMN description TEXT
ğŸ  å°é‡‘åº“æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
```

âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼š
- è‡ªåŠ¨è¿ç§»ä»…æ”¯æŒ**æ·»åŠ åˆ—**ï¼Œä¸æ”¯æŒåˆ é™¤åˆ—ã€ä¿®æ”¹åˆ—ç±»å‹æˆ–é‡å‘½ååˆ—
- å¦‚éœ€å¤æ‚è¿ç§»ï¼ˆåˆ é™¤/é‡å‘½å/æ”¹ç±»å‹ï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨æ“ä½œæ•°æ®åº“
- å»ºè®®åœ¨ä¿®æ”¹æ¨¡å‹å‰å¤‡ä»½æ•°æ®åº“æ–‡ä»¶ `backend/golden_nest.db`
### æ™ºèƒ½å†³ç­–é€»è¾‘

**ç”¨æˆ·è„šæœ¬ (run.bat/run.sh)**:
1. æ£€æµ‹ç«¯å£å ç”¨
2. è¯»å–æ ‡è®°æ–‡ä»¶
3. å¦‚æœæ˜¯AIå¯åŠ¨ â†’ è‡ªåŠ¨ç»ˆæ­¢å¹¶é‡å¯
4. å¦‚æœæ˜¯USERå¯åŠ¨ â†’ æç¤ºå·²è¿è¡Œ
5. å¯åŠ¨æˆåŠŸåå†™å…¥ USER æ ‡è®°

**AIè„šæœ¬ (run_ai.bat/run_ai.sh)**:
1. æ£€æµ‹ç«¯å£å ç”¨
2. è¯»å–æ ‡è®°æ–‡ä»¶
3. å¦‚æœæ˜¯USERå¯åŠ¨ â†’ å¤ç”¨æœåŠ¡ï¼Œä¸ç»ˆæ­¢
4. å¦‚æœæ˜¯AIå¯åŠ¨ â†’ æ£€æµ‹å·²è¿è¡Œ
5. å¯åŠ¨æˆåŠŸåå†™å…¥ AI æ ‡è®°

## ğŸ“Œ ç«¯å£ä¿¡æ¯

| æœåŠ¡ç±»å‹ | ç«¯å£ | è®¿é—®åœ°å€ | ç”¨é€” |
|---------|------|----------|------|
| Backend (å¼€å‘) | 8000 | http://127.0.0.1:8000 | ç”¨æˆ·å¼€å‘ + AIå¤ç”¨ |
| Frontend (å¼€å‘) | 5173 | http://localhost:5173 | ç”¨æˆ·å¼€å‘ + AIå¤ç”¨ |
| Backend (æµ‹è¯•) | 8001 | http://127.0.0.1:8001 | AIä¸´æ—¶æµ‹è¯•ä¸“ç”¨ |
| Frontend (æµ‹è¯•) | 5174 | http://localhost:5174 | AIä¸´æ—¶æµ‹è¯•ä¸“ç”¨ |

## ğŸš€ å¿«é€Ÿå‘½ä»¤

### Windows - ç”¨æˆ·å¼€å‘
```cmd
# åç«¯
cd backend && run.bat

# å‰ç«¯
cd frontend && run.bat
```

### Linux/macOS - ç”¨æˆ·å¼€å‘
```bash
# åç«¯
cd backend && ./run.sh

# å‰ç«¯
cd frontend && ./run.sh
```

### AIæµ‹è¯•ï¼ˆè‡ªåŠ¨è°ƒç”¨ï¼‰
```cmd
# Windows
cd backend && run_ai.bat
cd frontend && run_ai.bat

# Linux/macOS
cd backend && ./run_ai.sh
cd frontend && ./run_ai.sh
```

### AIä¸´æ—¶æµ‹è¯•ï¼ˆæ¨èç”¨äºæ¥å£æµ‹è¯•ï¼‰
```cmd
# Windows - å¯åŠ¨ä¸´æ—¶æµ‹è¯•æœåŠ¡
cd backend && run_test.bat
cd frontend && run_test.bat

# æµ‹è¯•å®Œæˆåæ¸…ç†
cleanup_test.bat

# Linux/macOS - å¯åŠ¨ä¸´æ—¶æµ‹è¯•æœåŠ¡
cd backend && ./run_test.sh
cd frontend && ./run_test.sh

# æµ‹è¯•å®Œæˆåæ¸…ç†
./cleanup_test.sh
```

## ğŸ¯ AIæµ‹è¯•ç­–ç•¥å»ºè®®

### ä½•æ—¶ä½¿ç”¨ run_ai (å¤ç”¨ç”¨æˆ·æœåŠ¡)
- âœ… ç”¨æˆ·å¯èƒ½æ­£åœ¨å¼€å‘
- âœ… éœ€è¦ä¸ç”¨æˆ·ç¯å¢ƒä¸€è‡´
- âœ… ä¸éœ€è¦ä¿®æ”¹ä»£ç æˆ–é…ç½®

### ä½•æ—¶ä½¿ç”¨ run_test (ç‹¬ç«‹æµ‹è¯•ç«¯å£)
- âœ… ä¸´æ—¶æ¥å£æµ‹è¯•
- âœ… éœ€è¦ç‹¬ç«‹æµ‹è¯•ç¯å¢ƒ
- âœ… é¿å…å¹²æ‰°ç”¨æˆ·å¼€å‘
- âœ… å¯èƒ½éœ€è¦æµ‹è¯•ç‰¹å®šé…ç½®

**æœ€ä½³å®è·µ**ï¼š
1. ä¼˜å…ˆæ£€æµ‹ç”¨æˆ·æœåŠ¡æ˜¯å¦è¿è¡Œï¼ˆç«¯å£8000/5173ï¼‰
2. å¦‚æœç”¨æˆ·æœåŠ¡åœ¨è¿è¡Œ â†’ ä½¿ç”¨ run_ai å¤ç”¨
3. å¦‚æœéœ€è¦ç‹¬ç«‹æµ‹è¯• â†’ ä½¿ç”¨ run_test (ä¸´æ—¶ç«¯å£8001/5174)
4. **æµ‹è¯•å®Œæˆå¿…é¡»æ‰§è¡Œ cleanup_test æ¸…ç†ä¸´æ—¶æœåŠ¡**

## â“ å¸¸è§é—®é¢˜

**Q: è„šæœ¬æç¤ºç«¯å£å·²å ç”¨ï¼Œä½†æˆ‘æƒ³é‡æ–°å¯åŠ¨æ€ä¹ˆåŠï¼Ÿ**
A: å…ˆæ‰¾åˆ°å ç”¨ç«¯å£çš„è¿›ç¨‹å¹¶åœæ­¢å®ƒï¼Œç„¶åé‡æ–°è¿è¡Œè„šæœ¬ã€‚

Windows:
```cmd
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr ":8000"
# åœæ­¢è¿›ç¨‹ (æ›¿æ¢PID)
taskkill /F /PID <PID>
```

Linux/macOS:
```bash
# æŸ¥æ‰¾å¹¶åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:8000 | xargs kill -9
```

**Q: AIæµ‹è¯•æ—¶ä¼šä¸ä¼šå½±å“æˆ‘çš„å¼€å‘ç¯å¢ƒï¼Ÿ**
A: ä¸ä¼šã€‚å¦‚æœä½ çš„æœåŠ¡å·²è¿è¡Œï¼ŒAIä¼šç›´æ¥ä½¿ç”¨ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„æœåŠ¡ã€‚

**Q: æˆ‘å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹å—ï¼Ÿ**
A: å½“å‰è„šæœ¬è®¾è®¡ä¸ºå•å®ä¾‹æ¨¡å¼ã€‚å¦‚éœ€å¤šå®ä¾‹ï¼Œéœ€è¦ä¿®æ”¹ç«¯å£é…ç½®ã€‚

**Q: ä¿®æ”¹äº†æ¨¡å‹ï¼ˆmodels.pyï¼‰ï¼Œå¦‚ä½•è®©æ•°æ®åº“åŒæ­¥ï¼Ÿ**
A: 
1. åªéœ€é‡å¯backendæœåŠ¡ï¼ˆ`run.bat` æˆ– `run.sh`ï¼‰
2. ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ¨¡å‹å˜åŒ–å¹¶æ·»åŠ ç¼ºå¤±çš„å­—æ®µ
3. æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ç¡®è®¤è¿ç§»æˆåŠŸï¼š
   ```
   [auto-migrate] ALTER TABLE xxx ADD COLUMN yyy
   ğŸ  å°é‡‘åº“æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
   ```

**Q: è‡ªåŠ¨è¿ç§»å¤±è´¥æˆ–éœ€è¦åˆ é™¤/ä¿®æ”¹å­—æ®µæ€ä¹ˆåŠï¼Ÿ**
A: 
è‡ªåŠ¨è¿ç§»ä»…æ”¯æŒ**æ·»åŠ å­—æ®µ**ã€‚å¦‚éœ€å¤æ‚æ“ä½œï¼š
1. åœæ­¢backendæœåŠ¡
2. å¤‡ä»½æ•°æ®åº“ï¼š`copy backend\golden_nest.db backend\golden_nest.db.backup`
3. ä½¿ç”¨SQLiteå·¥å…·æ‰‹åŠ¨ä¿®æ”¹ï¼ˆå¦‚ DB Browser for SQLiteï¼‰
4. æˆ–åˆ é™¤æ•°æ®åº“æ–‡ä»¶è®©ç³»ç»Ÿé‡æ–°åˆ›å»ºï¼ˆä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼‰

**Q: å¦‚ä½•æŸ¥çœ‹å½“å‰æ•°æ®åº“ç»“æ„ï¼Ÿ**
A:
```cmd
# Windows
cd backend
.\venv\Scripts\activate
python -c "from app.core.database import engine, Base; import asyncio; asyncio.run(Base.metadata.reflect(engine))"

# æˆ–ä½¿ç”¨ SQLite GUI å·¥å…·
# æ¨è: DB Browser for SQLite (https://sqlitebrowser.org/)
```
